"use strict";(self.__LOADABLE_LOADED_CHUNKS__=self.__LOADABLE_LOADED_CHUNKS__||[]).push([[7963],{97963:(e,o,t)=>{t.d(o,{"t1":()=>r,"_n":()=>n,"Sf":()=>s,"kF":()=>se});var r={};t.r(r),t.d(r,{"logToAnalytics":()=>_});var n={};t.r(n),t.d(n,{"fetchCreateOnlineAccount":()=>z,"fetchCreateOnlineAccountError":()=>Y,"fetchCreateOnlineAccountSuccess":()=>j,"fetchFindCustomer":()=>F,"fetchFindCustomerError":()=>x,"fetchFindCustomerSuccess":()=>Z,"fetchSendVerificationCode":()=>R,"fetchSendVerificationCodeError":()=>L,"fetchSendVerificationCodeSuccess":()=>G,"fetchVerifyCode":()=>W,"fetchVerifyCodeError":()=>q,"fetchVerifyCodeSuccess":()=>H});var s={};t.r(s),t.d(s,{"closeUnknownUserModal":()=>ce,"loadInitialState":()=>se,"loadInitialStateSuccess":()=>ie,"onDisplayAccountCheckComponent":()=>te,"onRedirectFromCheckoutSignInForm":()=>ne,"onRedirectToCheckoutSignInForm":()=>re,"openUnknownUserModal":()=>ae});var i=t(19865);const a="engagement/account/customer-profile/",c="analytics_log/",d="_error",p="_success",u=a+c+"click_stream_analytics",l=a+c+"find_customer",h=l+p,g=l+d,S=a+c+"send_verification_code",f=S+p,I=S+d,m=a+c+"verify_code",C=m+p,y=m+d,v=a+c+"create_online_account",w=v+p,k=v+d,_=(0,i.Z)(u),E=a+"find_customer",A=E+p,T=E+d,N=a+"send_verification_code",P=N+p,b=N+d,D=a+"verify_code",O=D+p,U=D+d,V=a+"create_online_account",B=V+p,M=V+d,F=(0,i.Z)(E),Z=(0,i.Z)(A),x=(0,i.Z)(T),R=(0,i.Z)(N),G=(0,i.Z)(P),L=(0,i.Z)(b),W=(0,i.Z)(D),H=(0,i.Z)(O),q=(0,i.Z)(U),z=(0,i.Z)(V),j=(0,i.Z)(B),Y=(0,i.Z)(M),X=a+"display_account_check_component",J=a+"customer_profile_load_initial_state",K=J+p,Q=a+"open_unknown_user_modal",$=a+"close_unknown_user_modal",ee=a+"redirect_to_checkout_sign_in_form",oe=a+"redirect_from_checkout_sign_in_form",te=(0,i.Z)(X),re=(0,i.Z)(ee),ne=(0,i.Z)(oe),se=(0,i.Z)(J,null,(()=>({track:!0}))),ie=(0,i.Z)(K),ae=(0,i.Z)(Q),ce=(0,i.Z)($);var de=t(95550),pe=t(57969),ue=t(67546),le=t.n(ue),he=t(46186),ge=t.n(he),Se=t(67882),fe=t.n(Se),Ie=t(90576),me=t.n(Ie);const Ce="UNAUTHORIZED",ye="HIT_A_SNAG",ve={"ICON-VRF-100":"WRONG_CODE"},we="SIGNUP_MULTIBRAND_EXPERIENCE",ke="SIGNUP",_e="SIGNIN_MULTIBRAND_EXPERIENCE",Ee="SIGNIN",Ae="VERIFY_OWNERSHIP",Te={"OCP-100":we,"OCP-101":ke,"OCP-200":_e,"OCP-201":Ee,"OCP-300":Ae};function Ne(e){const o={400:ye,401:Ce,500:ye,502:ye},{status:t,iconCode:r}=e;return r&&me()(ve,r)?fe()(ve,r,ye):fe()(o,t,ye)}const Pe={[E]:e=>ge()({},e,{errorState:{findCustomer:{bannerErrorCode:null}},fetching:{fetchingCustomerAccount:!0}}),[A]:(e,o)=>{const t=function(e,o){const{code:t=null,isAnniversaryUSEarlyAccess:r,isAnniversaryCAEarlyAccess:n,isAccountCheckModal:s}=o,i=fe()(e,"view",""),a="credit-sign-in"===i||"credit-create-account"===i||"credit-create-online-account"===i,c=Te[t],d=c===Ae;let p=!1,u="",l=Ee;return d&&(u=a?"/signup/cardmember/verify":"/signup/verify",p=!0,l=Ae),(c===ke||c===we)&&(p=!0,u=r||n?"/signup/anniversary":a?"/signup/cardmember":"/signup",l=ke),s&&(p=!1),{isMultiBrand:c===_e||c===we,componentView:l,shouldRedirectUser:p,routePath:u,verifyOwnership:d}}(e.logging,o.payload),r=fe()(o.payload,"suppressCreateAccount",!1),{hasVerifiedMobile:n=!1,isCheckoutView:s=!1}=o.payload||{},i=!n&&s;return function(e={},o={},t=!1){const r=fe()(e,"code",""),n="OCP-100"===r||"OCP-101"===r||"OCP-300"===r,s=fe()(o,"componentView",""),i=s.includes(ke)||s.includes(Ae);return t&&n&&i}(o.payload,t,r)?ge()({},e,{findCustomer:{...o.payload},fetching:{fetchingCustomerAccount:!1},isUnknownUserModalVisible:!0,showAccountCheckComponent:!0}):ge()({},e,{findCustomer:{...o.payload},fetching:{fetchingCustomerAccount:!1},isMultiBrand:t.isMultiBrand,componentView:t.componentView,showAccountCheckComponent:!1,shouldRedirectUser:t.shouldRedirectUser,routePath:t.routePath,redirectToGuestCheckoutSignInForm:i})},[T]:(e,o)=>{const t=Ne(o.payload);return ge()({},e,{fetching:{fetchingCustomerAccount:!1},errorState:{findCustomer:{bannerErrorCode:t}}})}},be={[N]:e=>ge()({},e,{errorState:{sendVerificationCode:{bannerErrorCode:null}},fetching:{fetchingSendVerificationCode:!0}}),[P]:(e,o)=>ge()({},e,{sendVerificationCode:{...o.payload},fetching:{fetchingSendVerificationCode:!1}}),[b]:(e,o)=>{const t=Ne(o.payload);return ge()({},e,{fetching:{fetchingSendVerificationCode:!1},errorState:{sendVerificationCode:{bannerErrorCode:t}}})}},De={[D]:e=>ge()({},e,{errorState:{verifyCode:{bannerErrorCode:null}},fetching:{fetchingVerifyCode:!0}}),[O]:(e,o)=>ge()({},e,{verifyCode:{...o.payload},fetching:{fetchingVerifyCode:!1}}),[U]:(e,o)=>{const t=Ne(o.payload);return ge()({},e,{fetching:{fetchingVerifyCode:!1},errorState:{verifyCode:{bannerErrorCode:t}}})}},Oe={[V]:e=>ge()({},e,{errorState:{createOnlineAccount:{bannerErrorCode:null}},fetching:{fetchingCreateOnlineAccount:!0}}),[B]:(e,o)=>ge()({},e,{createOnlineAccount:{...o.payload},fetching:{fetchingCreateOnlineAccount:!1}}),[M]:(e,o)=>{const t=Ne(o.payload);return ge()({},e,{fetching:{fetchingCreateOnlineAccount:!1},errorState:{createOnlineAccount:{bannerErrorCode:t}}})}},Ue={[X]:(e,o)=>le()({},e,{findCustomer:{...o.payload},showAccountCheckComponent:!0,redirectToGuestCheckoutSignInForm:!1})},Ve={isAccountCheckFlow:!1,errorState:{findCustomer:{bannerErrorCode:null},sendVerificationCode:{bannerErrrorCode:null},verifyCode:{bannerErrrorCode:null},ceateOnlineAccount:{bannerErrorCode:null}},fetching:{fetchingCustomerAccount:!1,fetchingSendVerificationCode:!1,fetchingVerifyCode:!1,fetchingCreateOnlineAccount:!1},logging:{team:"",view:""},isMultiBrand:!1,componentView:"SIGNIN",showAccountCheckComponent:!1,showVerifyOwnershipComponent:!1,shouldRedirectUser:!1,routePath:"",redirectToGuestCheckoutSignInForm:!1,isUnknownUserModalVisible:!1},Be={[K]:(e,o)=>{const{configuredInitialState:t}=o.payload;return le()({},Ve,t)}},Me={[Q]:e=>({...e,isUnknownUserModalVisible:!0}),[$]:e=>({...e,isUnknownUserModalVisible:!1})},Fe={[ee]:e=>({...e,redirectToGuestCheckoutSignInForm:!0})},Ze={[oe]:e=>({...e,redirectToGuestCheckoutSignInForm:!1})},xe=le()(Be,Ue,Fe,Ze,Me),Re=le()(Pe,be,De,Oe),Ge=(0,pe.Z)(le()(Re,xe),Ve);de.u.add({customerProfile:Ge});function Le({status:e=500}){return{status:e,message:"Create Online Account Exception"}}var We=t(48714),He=t(2284),qe=t(13186),ze=t.n(qe),je=t(37693),Ye=t.n(je);const Xe={failedToGetForterToken:function(){},failedToCheckForterTokenExists:function(){}};function Je({isProduction:e,logger:o=Xe,preSignInShopperId:t}){try{const r=new He.Z({isProd:e});r.loadFromBrowser();const n=r.getData().forterToken;return Ye()(n)?(o.hasEmptyForterToken({preSignInShopperId:t}),""):ze()(n,"_")[0]}catch(r){return o.failedToGetForterToken(r,{preSignInShopperId:t}),""}}var Ke=t(85208);var Qe=t(95509);class $e{constructor(e){this.Accept="application/json",this["Content-Type"]="application/json",this["Nord-Api-Version"]="1.0",this["Nord-Request-Id"]=(0,We.Z)(),this["Nord-Source-Channel"]="FULL_LINE",this["Nord-Brand-Code"]="NCOM",this.newrelic=(0,We.Z)(),this["Nord-Source-Platform"]=e?"MOW":"WEB",this["X-Nor-Scope"]=e?"MobileRegistered":"WebRegistered"}setCookieHeaders(e){return this["X-Nor-Appiid"]=Je(e),this["Nord-Session-Id"]=function({isProduction:e}){const o={isProd:e},t=new Ke.Z(o);return t.loadFromBrowser(),t.getData().SessionId}(e),this}setProxyAccessToken(e){return this["Ocp-Access-Token"]="Bearer "+e,this}setAuthorization(e){return this.Authorization="Bearer "+e,this}setLoadTest(e){return this["Nord-Load"]=e,this}setClientIds(e){return this["Nord-Client-Ids"]=e,this}setUserId(e){return this.UserId=e,this["X-Nor-Clientid"]=(0,Qe.i)(e),this}setShopperId(e){return this.ShopperId=e,this}build(){return this}}const eo="info";class oo{constructor({actionName:e,logger:o,logging:t,sessionId:r}){this.logger=o,this.sharedData={category:"Sign In Component",methodName:e,logging:t,sessionId:r,team:t.team,view:t.view}}request(e,o){const t={apiVersion:e["Nord-Api-Version"],clientId:e["Nord-Client-Id"],hasShopperId:fe()(e,"ShopperId","").length>10,message:"request to service",requestId:e["Nord-Request-Id"],url:o,...this.sharedData};return this.logger.logEvent(eo,t),t}response(e,o){const t={message:"response from service",status:e,timeTakenInMSec:o,...this.sharedData};return this.logger.logEvent(eo,t),t}event(e,o){const t={desc:e,value:o,...this.sharedData};return this.logger.logEvent(eo,t),t}error(e,o,{preSignInShopperId:t}){this.logger.logError(e,{message:o,preSignInShopperId:t,...this.sharedData})}preAuthError({error:e,isUsingConflictExperience:o,preSignInShopperId:t}){this.logger.logError(e,{category:"register",componentName:"register",isUsingConflictExperience:o,message:"failed to create account because pre-auth retry failed",methodName:"create-account",team:"account",preSignInShopperId:t,view:this.sharedData.view})}failedToCheckForterToken(e){this.logger.logError(e,{message:"failed to check forter token exists",...this.sharedData})}failedToGetForterToken(e,{preSignInShopperId:o,postSignInShopperId:t}){const r={message:"failed to get forter token",preSignInShopperId:o,postSignInShopperId:t,...this.sharedData};return this.logger.logError(e,r),r}failedToGetShopperId(e,{preSignInShopperId:o,postSignInShopperId:t}){const r={message:"failed to get shopper id",preSignInShopperId:o,postSignInShopperId:t,...this.sharedData};return this.logger.logError(e,r),r}failedToGetShopperToken(e,{preSignInShopperId:o,postSignInShopperId:t}){const r={message:"failed to get shopper token",preSignInShopperId:o,postSignInShopperId:t,view:this.sharedData.view};return this.logger.logError(e,r),r}failedToRemoveSslRefreshCookie(e,{shopperId:o}){const t={message:"failed to remove ssl refresh cookie",shopperId:o,...this.sharedData};return this.logger.logError(e,t),t}failedToSaveShopperId(e,{preSignInShopperId:o,postSignInShopperId:t}){const r={message:"failed to save shopper id",preSignInShopperId:o,postSignInShopperId:t,...this.sharedData};return this.logger.logError(e,r),r}failedToSaveSslBearerToken(e,{preSignInShopperId:o,postSignInShopperId:t}){const r={message:"failed to save ssl bearer token",preSignInShopperId:o,postSignInShopperId:t,...this.sharedData};return this.logger.logError(e,r),r}hasEmptyForterToken({preSignInShopperId:e,postSignInShopperId:o}){const t={message:"has empty forter token",preSignInShopperId:e,postSignInShopperId:o,...this.sharedData};return this.logger.logEvent(eo,t),t}}var to=t(42404),ro=t(3065),no=t(31854);const so=function(e,o,t,r){const{configuration:{history:n}={},team:s="",view:i="",env:a}=e.payload;o(ie({configuredInitialState:{history:n,isAccountCheckFlow:!0,showAccountCheckComponent:!0,logging:{env:a,team:s,view:i}}}))},io=(e,o)=>{const t={type:"engagement/myaccount/analytics",meta:{track:!0},payload:{...e,platform:"MOW/Desktop"}};return o&&(e=>{const{action_name:o,...t}=e;console.info("%c %s","background: #363636; color: #bada55","Dispatch analytic action: ",{action:o,...t})})(t.payload),t},ao=(e,o,t,r="")=>{const{environment:{isDevelopment:n}}=t(),{actionName:s}=e.payload,i={category:"customer_profile",view:r};switch(s){case h:o(io({action_name:"find_customer",label:"success",...i},n));break;case g:o(io({action_name:"find_customer",label:"error",...i},n))}};var co=t(30299),po=t.n(co),uo=t(48108);var lo=t(32298),ho=t(20253),go=t.n(ho);var So=t(28093),fo=t(4608);var Io=t(40816);var mo=t(19998),Co=t(37843);async function yo(e,o,t,r){const{isRetry:n=!1,password:s,code:i,verifier:a,onSuccess:c=po(),onFailure:d=po()}=e.payload,{customerProfile:{findCustomer:{email:p,ocpAccessToken:u},verifyCode:{customerId:l},logging:h},environment:{isMobileDevice:g,isProduction:S},shopper:{SessionId:f,Id:I}}=t(),{view:m}=h,{fetch:C,logger:y}=r,v={logging:h,loggerCategory:"Verify Ownership Component"},E={getState:t,helpers:r,dispatch:o},A=new oo({actionName:"create_online_account",logger:y,logging:h,sessionId:f}),{preAuthorize:T,authorizeCompleteCustomerProfile:N}=Co._n;if(!i||!a){if(n){const e="Pre-authorization failure";A.preAuthError({error:{message:e},preSignInShopperId:I}),o(Y({message:e})),o(_({actionName:k})),d({message:e})}else{const t=()=>o(z({...e.payload,isRetry:!0}));o(T({onFailure:t,onSuccess:t}))}return}const P=new $e(g).setUserId(m).build();let b,D;try{const e={code:i,verifier:a,userRegistrationInfo:{email:p,password:s}},{status:o,accessToken:t,tempBrandId:r}=await(0,mo.Z)({platformHelpers:E,headers:P,loggingContext:v,payload:e});if(202!==o)throw Le({status:o});b=t,D=r}catch(B){const{status:e,message:t}=B;return A.error(B,"authorize failed to create online account",{preSignInShopperId:I}),o(Y({status:e,message:t})),o(_({actionName:k})),void d(B)}const O=(0,to.UN)(t())+"customers/"+l,U={credentials:"include",method:"POST",headers:new $e(g).setUserId(m).setProxyAccessToken(u).setAuthorization(b).setCookieHeaders({isProduction:S,preSignInShopperId:I,logger:A}).build(),body:JSON.stringify({tempBrandId:D,email:p})};A.request(U.headers,A);const V=Date.now();return C(O+"?source=WEB&subsource=WEB_MYACCOUNT",U).then((async e=>{const{status:o}=e,t=200===o,r=Date.now()-V;if(A.response(o,r,{}),t){return{status:o,payload:{...await e.json()}}}throw Le({status:o})})).then((async e=>{const{accessToken:t,expiresIn:r,brandId:n,shopperToken:s,profile:i}=e.payload,a={isProduction:S,logger:A,preSignInShopperId:I,postSignInShopperId:n},d=fe()(i,"programs.MTLYLTY"),p=fe()(i,"mobile"),u=fe()(i,"firstName");d&&!p&&o(N()),function({isProduction:e,logger:o,postSignInShopperId:t}){try{new Io.Z({isProd:e}).removeFromBrowser()}catch(B){o.failedToRemoveSslRefreshCookie(B,{postSignInShopperId:t})}}(a),function(e,o,t){const{isProduction:r,logger:n,preSignInShopperId:s,postSignInShopperId:i}=t;try{const t=new So.Z({isProd:r,expires:o});t.setData({bearer:e}),t.saveToBrowser()}catch(B){n.failedToSaveSslBearerToken(B,{preSignInShopperId:s,postSignInShopperId:i})}}(t,r,a),function(e,o){const{isProduction:t,logger:r,preSignInShopperId:n,postSignInShopperId:s}=o;try{const o=Date.now()+1e3*e,r=new fo.Z({isProd:t,expiresDate:o});r.setData({expiration:o}),r.saveToBrowser()}catch(B){r.failedToSaveSslBearerExpiration(B,{preSignInShopperId:n,postSignInShopperId:s})}}(r,a),function(e){const{isProduction:o,logger:t,preSignInShopperId:r,postSignInShopperId:n}=e;try{const e=new uo.Z({isProd:o});e.loadFromBrowser(),e.setData({shopperid:n}),e.saveToBrowser()}catch(B){t.failedToSaveShopperId(B,{preSignInShopperId:r,postSignInShopperId:n})}}(a);const h=function(e){const{isProduction:o,logger:t,preSignInShopperId:r,postSignInShopperId:n}=e;try{const e=new lo.Z({isProd:o});e.loadFromBrowser();const{shopperToken:t}=e.getData();return t}catch(B){return t.failedToGetShopperToken(B,{preSignInShopperId:r,postSignInShopperId:n}),""}}(a);!function(e,{isProduction:o,logger:t}){try{if(go()(e))return null;const t=new lo.Z({isProd:o});return t.loadFromBrowser(),t.setData({shopperToken:e}),t.saveToBrowser(),null}catch(B){return t.failedToSaveShopperToken(B),null}}(s,a);const{mergeShoppingBag:g}=Co._n,f={onSuccess:()=>{o(j({status:200})),o(_({actionName:w})),c()},onFailure:e=>{throw Le({status:500})},firstName:u,ocpId:l,preSignInShopperId:I,preSignInShopperToken:h,postSignInShopperId:n};o(g(f))})).catch((e=>{const t=e.status||500,r=e.message;A.error(e,"failed to create an account from store profile",{preSignInShopperId:I}),o(Y({status:t,message:r})),o(_({actionName:k})),d({message:r})}))}const vo=(e,o,t,r)=>{const{signInComponent:{logging:{view:n}}}=t();switch(e.type){case E:return function(e,o,t,r){const{email:n,isAccountCheckModal:s=!1,isCheckoutView:i=!1,suppressCreateAccount:a=!1}=e.payload,c=t(),{customerProfile:d,environment:{isProduction:p,isMobileDevice:u},experiments:{optimizely:{experiments:l,id:S}},featureFlags:{isAnniversaryUSEarlyAccess:f,isAnniversaryCAEarlyAccess:I,useShapePSIHeader:m},shopper:{SessionId:C,Id:y},signInComponent:{logging:v}}=c,{fetch:w,logger:k,businessEventLogger:E}=r,A=fe()(d,"logging.view",""),T=l.find((e=>"cam_persistent_sign_in_autocheck"===e.n));T&&E.logBusinessEvent({clientId:"mwp",eventTime:Date.now(),eventType:"com.nordstrom.customer.event.ExperimentVariationExposed"},{bucketingId:S,experimentName:T.n,variationName:T.v,projectName:T.p,customer:no.Z.selectEventCustomer(c),source:no.Z.selectEventSource(c)});const N=new oo({actionName:"find_customer",logger:k,logging:v,sessionId:C}),P=(0,to.UN)(t())+"customers/find",b={credentials:"include",method:"POST",headers:new $e(u).setUserId(A).setCookieHeaders({isProduction:p,preSignInShopperId:y,logger:N}).build(),body:JSON.stringify({email:n})};N.request(b.headers,P);const D=Date.now();return w(P,b).then((e=>{const{status:o}=e,t=200===o,r=Date.now()-D;N.response(o,r,{});const n=e.headers.get("nord-device-category");N.event("Shape Decision",n);const s=!("1"!==n||!m||!T||"enabled"!==T.v);if(s&&N.event("Check PSI Checkbox",s),t)return e.json().then((o=>({status:e.status,payload:o,shouldCheckPSICheckbox:s})));throw function({status:e=500}){return{status:e,message:"Find Customer Exception"}}({status:o})})).then((e=>{const{payload:t,shouldCheckPSICheckbox:r}=e,c=t.migrationMetadata?.groupType;(0,ro.Eh)({groupType:c||""});const d=Boolean(t.jwnWithTcId);(0,ro.ad)({isMultiBrandedExperience:d}),c&&N.event("Migration Metadata",{...t.migrationMetadata}),N.event("OCP Response Code",{"OCP-code":t.code,isMultiBrandedExperience:d}),o(Z({...t,email:n,isAccountCheckModal:s,isCheckoutView:i,isProduction:p,isAnniversaryUSEarlyAccess:f,isAnniversaryCAEarlyAccess:I,shouldCheckPSICheckbox:r,suppressCreateAccount:a})),o(_({actionName:h}))})).catch((e=>{const t=e.status||500;N.error(e,"failed to find customer by email",{preSignInShopperId:y}),o(x({status:t})),o(_({actionName:g}))}))}(e,o,t,r);case N:return function(e,o,t,r){const{deliveryMethod:n,value:s,firstName:i}=e.payload,{customerProfile:a,environment:{isMobileDevice:c},shopper:d,signInComponent:{logging:p}}=t(),{fetch:u,logger:l}=r,h=d.SessionId||"",g=fe()(a,"findCustomer.ocpAccessToken"),S=fe()(a,"logging.view",""),m=new oo({actionName:"send_verification_code",logger:l,logging:p,sessionId:h}),C=(0,to.UN)(t())+"customers/verify",y={credentials:"include",method:"POST",headers:new $e(c).setProxyAccessToken(g).setUserId(S).build(),body:JSON.stringify({type:n,value:s,messageType:"WEB",placeHolder:{FirstName:i}})};m.request(y.headers,C);const v=Date.now();return u(C+"?source=WEB&subsource=WEB_MYACCOUNT",y).then((e=>{const{status:o}=e,t=200===o||201===o,r=Date.now()-v;if(m.response(o,r,{}),t)return{status:o};throw function({status:e=500}){return{status:e,message:"Send Verification Code Exception"}}({status:o})})).then((e=>{const{status:t}=e;o(G({status:t})),o(_({actionName:f}))})).catch((e=>{const t=e.status||500;o(L({status:t})),o(_({actionName:I}))}))}(e,o,t,r);case D:return function(e,o,t,r){const{deliveryMethod:n,value:s,code:i}=e.payload,{customerProfile:a,environment:{isMobileDevice:c},shopper:d,signInComponent:{logging:p}}=t(),{fetch:u,logger:l}=r,h=d.SessionId||"",g=fe()(a,"logging.view",""),S=fe()(a,"findCustomer.ocpAccessToken"),f=new oo({actionName:"verify_code",logger:l,logging:p,sessionId:h}),I=(0,to.UN)(t())+"customers/verify/code",m={credentials:"include",method:"POST",headers:new $e(c).setProxyAccessToken(S).setUserId(g).build(),body:JSON.stringify({type:n,value:s,code:i})};f.request(m.headers,f);const v=Date.now();return u(I+"?source=WEB&subsource=WEB_MYACCOUNT",m).then((async e=>({status:e.status,payload:{...await e.json()}}))).then((e=>{const{status:o}=e,t=200===o,r=Date.now()-v;if(f.response(o,r,{}),t)return{status:o,customerId:e.payload.customerId};{const t=e.payload?.messages?.[0]?.errorCode;throw function({iconCode:e,status:o=500}){return{status:o,message:"Verify Code Exception",iconCode:e}}({status:o,iconCode:t})}})).then((e=>{const{status:t,customerId:r}=e;o(H({status:t,customerId:r})),o(_({actionName:C}))})).catch((e=>{const t=e.status||500,r=e.message,n=e.iconCode;o(q({status:t,message:r,iconCode:n})),o(_({actionName:y}))}))}(e,o,t,r);case V:return yo(e,o,t,r);case J:return so(e,o,t,r);case u:return ao(e,o,t,n);default:return null}};de.h.add({customerProfile:vo})}}]);